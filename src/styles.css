/* Sizes */
:root {
  --day: #a6d8ff;
  --dusk: #ffb36b;
  --night: #0f1025;
  --footer-height: 180px;
  /* Mountains (default to night palette, overridden by modes) */
  --mtn-top: #3f3168;
  --mtn-bot: #1a1538;
  --mtn-shade: #251b4a;
}

/* Global */
* { box-sizing: border-box; }
html, body, #root { height: 100%; margin: 0; }
body { font-family: 'Rubik', 'Varela Round', system-ui, -apple-system, sans-serif; direction: rtl; background: var(--night); color: #e6edf6; }
.container { width: 100%; min-height: 100vh; padding: 0; }
.card { background: transparent; border-radius: 0; padding: 16px; box-shadow: none; }
.label { font-weight: 700; margin-bottom: 8px; }
.row { display: flex; gap: 12px; align-items: center; flex-wrap: wrap; }
.input { font-size: 20px; padding: 12px 16px; border-radius: 12px; border: 1px solid #a5b4fc33; background: rgba(255,255,255,0.1); color: #eef2ff; }
.input::placeholder { color: #c7d2feaa; }
.button { background: #6c5ce7; color: white; border: none; border-radius: 14px; padding: 10px 16px; font-size: 18px; cursor: pointer; }
.button:disabled { opacity: .5; cursor: default; }

/* Hero */
.hero { min-height: 100vh; display: flex; align-items: center; justify-content: center; text-align: center; padding: 24px; }
.hero .row { justify-content: center; }
.caption { font-size: 40px; font-weight: 800; margin-bottom: 16px; white-space: nowrap; color: #f8fafc; }
.hero-inline { display: flex; align-items: center; gap: 12px; flex-wrap: wrap; justify-content: center; flex-direction: column; }

/* Sky stage */
.sky { position: relative; height: calc(100vh - var(--footer-height)); min-height: 360px; border-radius: 0; overflow: hidden; background: linear-gradient(180deg, var(--day), #fff); transition: background 800ms ease; }
.sky.mode-day { --mtn-top: #8b5e34; --mtn-bot: #5a3e1e; --mtn-shade: #6d4b26; }
.sky.mode-dawn { --mtn-top: #a16d3a; --mtn-bot: #6a4526; --mtn-shade: #7a5230; }
.sky.mode-dusk { --mtn-top: #7a4f8a; --mtn-bot: #3b2a59; --mtn-shade: #4a356a; }
.sky.mode-night { --mtn-top: #3f3168; --mtn-bot: #1a1538; --mtn-shade: #251b4a; }

/* Layering order (lowâ†’high): sea (3), stars (0), sun (1), clouds (2), moon (3), mountains (4), trees (5), overlays (10) */
.stars { position: absolute; inset: 0; pointer-events: none; opacity: 0; transition: opacity 800ms ease; z-index: 0; }
.sky.mode-night .stars { opacity: 1; }
.star { position: absolute; background: radial-gradient(circle, #fff, rgba(255,255,255,0.15)); border-radius: 50%; opacity: 0.8; animation: twinkle 2.8s ease-in-out infinite; }
@keyframes twinkle { 0%,100% { opacity: 0.4 } 50% { opacity: 1 } }

.sun, .moon { position: absolute; border-radius: 50%; transform: translate(-50%, -50%); display: flex; align-items: center; justify-content: center; }
.sun { z-index: 1; width: 48px; height: 48px; background: radial-gradient(circle at 30% 30%, #fff6a0, #f3c52a); filter: drop-shadow(0 0 5px rgba(255,200,0,0.35)); }
.moon { z-index: 1; width: 84px; height: 84px; filter: drop-shadow(0 0 10px rgba(200,220,255,0.3)); }
.moon svg { filter: drop-shadow(0 0 4px rgba(0,0,0,0.6)); }
.sky.mode-day .moon svg { filter: drop-shadow(0 0 6px rgba(0,0,0,0.8)); }
/* Bright moon glow at night */
.sky.mode-night .moon svg { filter: drop-shadow(0 0 10px rgba(210,230,255,0.9)) drop-shadow(0 0 22px rgba(170,210,255,0.6)); }
.loading-moon svg { filter: drop-shadow(0 0 10px rgba(210,230,255,0.9)) drop-shadow(0 0 22px rgba(170,210,255,0.6)); }
/* Improve moon visibility during day by adding a dark outline */
/* Daytime moon outline is applied conditionally in component for ultra-thin phases */

.clouds { position: absolute; top: -1px; bottom: -1px; left: -2px; right: -2px; pointer-events: none; z-index: 3; }
.cloud { position: absolute; left: -30%; width: 260px; height: 84px; opacity: 0.5; animation-name: drift; animation-timing-function: linear; animation-iteration-count: infinite; }
.cloud .puff { position: absolute; background: rgba(255,255,255,0.85); border-radius: 999px; box-shadow: 0 8px 20px rgba(0,0,0,0.05); }
.cloud .puff.a { width: 90px; height: 54px; left: 20px; top: 14px; }
.cloud .puff.b { width: 130px; height: 70px; left: 60px; top: 8px; }
.cloud .puff.c { width: 80px; height: 50px; left: 130px; top: 20px; }
@keyframes drift { from { transform: translateX(0) } to { transform: translateX(160vw) } }

/* Ground layers */
.mountains { position: absolute; left: 0; width: 65%; bottom: 0; height: 45%; pointer-events: none; z-index: 5; }
.mountains svg { width: 100%; height: 100%; display: block; }
.trees { position: absolute; left: 0; width: 65%; bottom: 0; height: 45%; pointer-events: none; z-index: 6; clip-path: inset(0 35% 0 0); transform: translateY(10%); }
.trees svg { width: 100%; height: 100%; display: block; }
/* Ground under trees */
.ground { position: absolute; left: 0; right: 40%; bottom: 0; height: 35%; pointer-events: none; z-index: 7; }
.ground svg { width: 100%; height: 100%; display: block; }
/* Sea on the left */
.sea { position: absolute; right: 0; width: 40%; bottom: 0; height: 15%; background: linear-gradient(180deg, #8fd5ff, #2c79b8); box-shadow: inset 0 8px 20px rgba(0,0,0,0.25); z-index: 4; overflow: hidden; }
.sky.mode-night .sea { background: linear-gradient(180deg, #1c3550, #0e2744); box-shadow: inset 0 10px 24px rgba(0,0,0,0.35); }
.sky.mode-dusk .sea, .sky.mode-dawn .sea { background: linear-gradient(180deg, #4f99c7, #1f5a90); }
.sky.mode-day .sea { background: linear-gradient(180deg, #8fd5ff, #2c79b8); }
.beach { position: absolute; left: 38%; width: 6%; bottom: 0; height: 16%; background: linear-gradient(180deg, #e9d8a6, #ddb892); z-index: 3 }
.blend { position: absolute; left: 38%; width: 2%; bottom: 0; height: 16%; background: linear-gradient(90deg, rgba(38,102,163,0), rgba(38,102,163,0.4), rgba(38,102,163,0)); filter: blur(4px); z-index: 3; pointer-events:none }
.shore { position: absolute; left: 44%; width: 1%; bottom: 0; height: 16%; background: linear-gradient(180deg, rgba(0,0,0,0.2), rgba(0,0,0,0)); z-index: 3; filter: blur(2px); pointer-events:none }
.sea .wave { position: absolute; left: 0; bottom: 6px; width: 200%; height: 18px; background: radial-gradient(circle at 10px -4px, rgba(255,255,255,0.85), rgba(255,255,255,0) 70%); animation: waves 12s linear infinite; opacity: 0.25; z-index: 3; }
.sea .wave.b { bottom: 14px; animation-duration: 16s; opacity: 0.19 }
.sea .wave.c { bottom: 22px; animation-duration: 22s; opacity: 0.14 }
.sea .wave.d { bottom: 30px; animation-duration: 18s; opacity: 0.11 }
.sea .wave.e { bottom: 38px; animation-duration: 26s; opacity: 0.10 }
@keyframes waves { from { transform: translateX(0) } to { transform: translateX(-50%) } }
.boat { position: absolute; left: 5%; bottom: 50%; width: 38px; height: 14px; background: #3b2b20; border-radius: 0 0 6px 6px; transform: translate(-50%, 50%); z-index: 4; animation: sail 70s linear forwards; }
.boat::after { content: ''; position: absolute; left: 50%; bottom: 14px; width: 2px; height: 24px; background: #cbd5e1; transform: translateX(-50%); z-index: 2; }
.boat::before { content: ''; position: absolute; left: 50%; bottom: 14px; width: 26px; height: 22px; background: #e2e8f0; clip-path: polygon(0 0, 0 100%, 100% 50%); transform: translateX(0); z-index: 3; }
@keyframes sail { 0% { left: 5%; opacity: 1 } 99% { opacity: 1 } 100% { left: 100%; opacity: 0 } }
.sky.mode-night .sea .wave { opacity: 0.5 }
.sky.mode-day .sea .wave { opacity: 0.85 }
.sea::before { content: ''; position: absolute; left: 0; right: 0; top: -8px; height: 8px; background: linear-gradient(180deg, rgba(255,255,255,0.7), rgba(255,255,255,0)); opacity: 0.6; }

.compass { display: none }
.west-label, .east-label { position: absolute; top: 50%; transform: translateY(-50%); color: #e2e8f0; z-index: 10; font-weight: 700; text-shadow: 0 1px 2px rgba(0,0,0,0.5); pointer-events: none; background: rgba(7,12,27,0.55); border-radius: 14px; padding: 6px 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.18); }
.west-label { right: 60px }
.east-label { left: 60px }

/* Illumination label at bottom of world view */
.illum-label { position: absolute; left: 50%; transform: translateX(-50%); bottom: 50px; color: #e2e8f0; z-index: 10; font-weight: 700; text-shadow: 0 1px 2px rgba(0,0,0,0.5); background: rgba(7,12,27,0.55); border-radius: 12px; padding: 6px 10px; box-shadow: 0 4px 16px rgba(0,0,0,0.18); direction: rtl; unicode-bidi: plaintext; opacity: 0; transition: opacity 2000ms ease; }
.illum-label.show { opacity: 1; }

/* Overlays */
.overlay-top { position: absolute; left: 0; right: 0; top: 0; padding: 8px; display: flex; justify-content: center; pointer-events: none; z-index: 10; }
.overlay-top-inner { display: flex; align-items: center; gap: 16px; background: rgba(7,12,27,0.55); border-radius: 14px; padding: 6px 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.18); pointer-events: auto; }
.hebrew-date { font-size: 20px; font-weight: 700; color: #f1f5f9; }
.day-highlight { background: #0b1022; color: #a5b4fc; padding: 2px 8px; border-radius: 10px; margin-left: 6px; display: inline-block; }
.date-wrap { display: flex; flex-direction: column; line-height: 1.2; }
.greg-date { font-size: 14px; color: #cbd5e1; text-align: start; }

.overlay-controls { position: fixed; left: 0; right: 0; bottom: 0; height: var(--footer-height); padding: 10px; background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.25)); z-index: 10; box-sizing: border-box; overflow: hidden; }
.overlay-inner { display: none }
.overlay-edges { display: none }
.overlay-grid { width: 100%; margin: 0 auto; height: calc(var(--footer-height) - 20px); display: grid; grid-template-columns: 15% 70% 15%; align-items: center; justify-items: stretch; gap: 12px; box-sizing: border-box; direction: ltr; }
.overlay-left { grid-column: 1; display: flex; align-items: center; justify-content: center; }
.overlay-center { grid-column: 2; display: flex; flex-direction: column; align-items: stretch; justify-content: center; gap: 6px; }
.overlay-center > * { width: 100%; }
/* Center the time badge within its column */
.overlay-center .time-badge { align-self: center; width: auto; }
.overlay-right { grid-column: 3; display: flex; align-items: center; justify-content: center; }
.overlay-center { display: flex; flex-direction: column; align-items: center; justify-content: flex-start; gap: 6px; }
.overlay-center [dir="ltr"] { width: 100%; }
.time-badge { background: rgba(7,12,27,0.7); color: #e2e8f0; padding: 6px 10px; border-radius: 12px; font-weight: 700; margin-bottom: 6px; }
.slider { width: 100%; height: 6px; }
.slider::-webkit-slider-runnable-track { height: 6px; background: #94a3b8; border-radius: 6px; }
.slider::-moz-range-track { height: 6px; background: #94a3b8; border-radius: 6px; }
.slider::-ms-track { height: 6px; background: #94a3b8; border-radius: 6px; border-color: transparent; color: transparent; }
.slider::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 16px; height: 16px; background: #ffffff; border: 2px solid #475569; border-radius: 50%; margin-top: -5px; }
.slider::-moz-range-thumb { width: 16px; height: 16px; background: #ffffff; border: 2px solid #475569; border-radius: 50%; }
.slider::-ms-thumb { width: 16px; height: 16px; background: #ffffff; border: 2px solid #475569; border-radius: 50%; }
.facts { color: #f1f5f9; font-size: 16px; direction: rtl; unicode-bidi: plaintext; text-align: center; width: 100%; max-width: 100%; overflow-wrap: anywhere; word-break: break-word; padding: 0 14px; }
.facts-title { font-weight: 800; margin: 0; padding: 0; }
.facts-text { margin-top: 6px; }
.facts ul { padding: 0; margin: 6px 0 0; list-style: none; display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 6px 12px; }

.actions-row { width: min(90vw, 1200px); display: none; }
/* Edges container aligned to the same content width */
.overlay-edges { width: min(90vw, 1200px); margin: 0 auto; display: flex; align-items: center; justify-content: space-between; gap: 12px; padding: 0 10px; box-sizing: border-box; }
.overlay-left { display: flex; align-items: center; }
.overlay-right { display: flex; align-items: center; justify-content: center; padding: 0 8px; box-sizing: border-box; }

/* Auto summary + hand hint */
.auto-summary { color: #f1f5f9; background: rgba(7,12,27,0.55); border-radius: 12px; padding: 8px 12px; box-shadow: 0 4px 16px rgba(0,0,0,0.18); font-weight: 700; direction: rtl; unicode-bidi: plaintext; }
.slider-wrap { position: relative; width: 100%; }
/* Reserve vertical space for the hint icon between slider and actions */
.hand-hint-row { position: relative; width: 100%; height: 38px; }
/* Text hint above slider */
.hand-hint-text { position: absolute; bottom: calc(100% + 6px); transform: translateX(-50%); color: #e2e8f0; font-size: 12px; line-height: 1; pointer-events: none; opacity: 1; font-weight: 700; text-shadow: 0 1px 2px rgba(0,0,0,0.4); white-space: nowrap; max-width: 90%; overflow: hidden; text-overflow: ellipsis; z-index: 11; }
/* Hint track sits below the time badge and mirrors the slider track size/borders */
.hint-track { position: relative; width: 100%; height: 18px; margin: 4px 0 4px; background: transparent; }
.hint-track::before { content: none; }
.hand-hint { position: absolute; top: calc(50% + 9px); transform: translate(-50%, -50%); display: flex; align-items: center; justify-content: center; gap: 4px; pointer-events: none; z-index: 11; height: 26px; flex-direction: column-reverse; }
.hand-hint .icon { width: auto; height: 46px; display: block; animation: pulse 1.2s ease-in-out 3; filter: brightness(0) invert(1) drop-shadow(0 1px 2px rgba(0,0,0,0.45)); }
.hand-hint .bubble { background: transparent; color: #e2e8f0; padding: 0; border-radius: 0; font-size: 12px; line-height: 1; margin-bottom: 2px; }
@keyframes pulse { 0%,100% { opacity: 0.5; transform: scale(1); } 50% { opacity: 1; transform: scale(1.08); } }

/* Respect reduced motion preferences */
@media (prefers-reduced-motion: reduce) {
  .hand-hint .icon { animation: none; }
}

/* Birds (day) */
.birds { position: absolute; inset: 0; pointer-events: none; }
.bird { position: absolute; width: 24px; height: 12px; background: transparent; animation: fly 20s linear infinite; }
.bird::before, .bird::after { content: ''; position: absolute; width: 12px; height: 12px; border: 2px solid #222; border-color: #222 transparent transparent #222; border-radius: 50% 0 0 0; transform-origin: bottom right; }
.bird::after { transform: scaleX(-1); right: 0; }
@keyframes fly { from { transform: translateX(-10%) translateY(0) } to { transform: translateX(110%) translateY(-10%) } }

/* Rooster (dawn) */
.rooster { position: absolute; left: 6%; bottom: 16%; width: 20px; height: 26px; background: #3b2b20; border-radius: 6px 6px 0 0; transform: translate(-50%, 0); box-shadow: 0 -8px 0 0 #d33; }
.rooster::after { content: ''; position: absolute; left: 50%; bottom: -6px; width: 14px; height: 6px; background: #3b2b20; border-radius: 0 0 6px 6px; transform: translateX(-50%); }

/* Moon sleeping Zs */
.moon.sleeping .zz-wrap { position: absolute; left: 70%; top: -10%; display: flex; gap: 2px; }
.moon.sleeping .zz { color: #ffffffcc; font-weight: 700; animation: floatUp 2.2s ease-in-out infinite; }
@keyframes floatUp { 0% { transform: translateY(0); opacity: 0.2; } 40% { opacity: 1; } 100% { transform: translateY(-16px); opacity: 0.1; } }

.hebrew { font-size: 22px; text-align: center; }
.hidden { display: none; } 